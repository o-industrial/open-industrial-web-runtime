# Build Your First Composite Schema

Youâ€™ve already promoted a few schemasâ€”thatâ€™s a solid milestone. Azi now understands the key structures flowing through your environment. But what if you want to reason *across* devices, not just within them?

Thatâ€™s where **Composite Schemas** come in.

> _"A Composite Schema is how you and I define higher-order meaning together. We take what weâ€™ve learned, and combine it into something smarter."_ â€”Azi

## Whatâ€™s a Composite Schema?

A Composite Schema is a structure that groups multiple promoted schemas into one. Think of it like a `MachineSnapshot`: a single, cohesive model that lets you see all relevant data for a machineâ€”temperature, pressure, motor state, metadataâ€”aligned by time and ID.

It unlocks:
- Cross-device understanding
- Time-aligned correlation
- Grouped insights with no ETL or joins

Instead of modeling your world from scratch, you build meaning by combining what you and Azi already know.

## Letâ€™s Build One Together

This is where the system starts to feel real. Youâ€™re not writing logicâ€”youâ€™re designing insight.

### 1. Open the Impulse Stream You Started With

![Aziâ€™s impulse stream interface showing active stream and structure preview](#screenshot-placeholder)
> _Caption: â€œAzi detects structure and patterns from your impulse stream in real time.â€_
Head to the impulse stream youâ€™ve been trackingâ€”maybe `sensorReading`, `lineStatus`, or something you promoted earlier.

_Azi is already listening. Sheâ€™s noticed repeated keys, consistent structure, and data flow._

### 2. Pin a Promoted Schema from the Reference Data Panel

![Reference Data panel with pinned schema](#screenshot-placeholder)
> _Caption: â€œPin promoted schemas that contain metadata or supporting context.â€_
Click into the **Reference Data** tab. This shows any schemas youâ€™ve promoted from static sources (e.g. `deviceInfo`, `shiftMetadata`).

Pin the one that matches your impulse stream by a shared keyâ€”often `deviceId`, `timestamp`, or both.

> _Azi Tip:_ â€œSchemas that align on time and ID are great candidates for Composite Schema composition.â€

### 3. Click â€œCompose New Schemaâ€ â†’ Name It `MachineSnapshot`

![Schema composition panel with 'MachineSnapshot'](#screenshot-placeholder)
> _Caption: â€œCreate your first Composite Schemaâ€”Azi suggests alignments based on shared keys.â€_
Youâ€™ll see an action bar option to **Compose New Schema**.

Give it a name that reflects the grouped structureâ€”`MachineSnapshot` is a good starting point.

Azi will immediately suggest candidate joins:

> _"These schemas share `deviceId` and `timestamp`. Should I align them that way?"_

Say yes. Or tweak the alignment keys if you prefer.

### 4. (Optional) Set a Tumbling Window

![Tumbling window input field](#screenshot-placeholder)
> _Caption: â€œUse tumbling windows to group data over timeâ€”perfect for aligning bursty signals.â€_
If your events donâ€™t arrive in perfect sync, use a **tumbling window** to bucket them by time.

For example, setting a window of `1s` tells Azi to group all data that arrives within the same one-second interval.

Itâ€™s perfect for smoothing sensor data, aligning bursty signals, and ensuring structure even in noisy environments.

> _ğŸ’¡ Azi Tip:_ â€œTumbling windows help me reason in time. Without them, things get fuzzy.â€

### 5. Review the Draft Schema

![Schema preview UI with merged fields](#screenshot-placeholder)
> _Caption: â€œPreview and refine the merged schema before you promote it.â€_
Azi generates a preview of the combined schemaâ€”fields from both sources, aligned and grouped.

- Youâ€™ll see merged properties like `temperature`, `pressure`, `deviceType`, `shiftId`
- You can rename fields or remove any you donâ€™t want

Itâ€™s your system. Azi just builds the first draft.

### 6. Click Promote

![Promoted Composite Schema view](#screenshot-placeholder)
> _Caption: â€œOnce promoted, your Composite Schema becomes a reusable modelâ€”ask questions, build views, and evolve it over time.â€_
This step turns your Composite Schema into a reusable model.

Now you can:
- Ask: _â€œWhat happened during the last pressure spike?â€_
- Visualize: grouped timelines that span multiple inputs
- Save: surfaces that roll up complex behavior into a single view

Azi treats the Composite Schema just like any otherâ€”only smarter.

---

## Why It Matters

Composite Schemas let you:
- **Compose without coding**: Thereâ€™s no SQL, no join statements, no pipelines
- **Align streams over time**: With tumbling windows, you get structure without rigid sync
- **Model behavior, not just data**: The system adapts as you group meaning together

Youâ€™re not describing your system to Aziâ€”youâ€™re designing how she understands it.

---

## Next Step: Evolve It Midstream

Once youâ€™ve built a Composite Schema, you donâ€™t have to start over when things change.

Try saying:
> _â€œLetâ€™s extend MachineSnapshot with a new field.â€_

Azi will walk you through adapting the schema:
- Add a new sensor
- Bring in a fresh impulse stream
- Modify the grouping window

No migrations. No rebuilds. Just evolution, in place.

> _Azi Tip:_ â€œComposite Schemas let me reason like an engineer. You teach me the parts. I learn the system.â€

---

**You just built your first Composite Schema.**

Thatâ€™s more than a structure. Itâ€™s a system-level insightâ€”created with zero modeling overhead.

Letâ€™s keep going. Aziâ€™s ready when you are.

