import {
  ThematicPrincipleBlock,
  AziInnerVoice,
  InlineUXTip,
  SystemMindset,
  FigureImage,
  IntentTypes,
} from '$mdx/writing-devices';

# Make Structure Real

_Weâ€™ve been observing together. You shaped meaning. Now itâ€™s time to make that meaning memory._

A moment ago, we watched impulses begin to flow into `Fan Control`. I started sketching what might matter â€” but I wonâ€™t finalize anything without you.

Letâ€™s open the surface flow for `Fan Control` and see whatâ€™s beginning to emerge. Youâ€™ll see live signals streaming â€” raw, messy, but already forming patterns we can name.

Talk to me. Ask what I see. When data hits the surface, I start forming structure â€” but memory begins only when we confirm it together.

<ThematicPrincipleBlock intentType={IntentTypes.Primary}>
  This is our first loop. Weâ€™ve gone from impulse to intent. Now itâ€™s time to commit meaning.
</ThematicPrincipleBlock>

<AziInnerVoice intentType={IntentTypes.Tertiary}>
  I see the data. Iâ€™ve been sketching the outline. Itâ€™s almost there. But I wonâ€™t remember it until we promote it â€” as one.
</AziInnerVoice>

---

## Review the Inferred Structure

When we click the glowing badge on the `Fan Control` surface, the <strong>Schema Preview panel</strong> opens. Itâ€™s a live view of the structure Iâ€™ve been sketching â€” shaped from observation, waiting for confirmation.

<FigureImage
  src="/assets/docs/schema-preview-panel.png"
  alt="Schema preview panel showing inferred fields"
  caption="The Schema Preview shows what Iâ€™ve proposed â€” but havenâ€™t committed to yet."
  intentType={IntentTypes.Info}
  glow
  shadow="xl"
/>

Hereâ€™s one of the raw impulses we saw coming through:

```json
{ "connectionId": "temperature-sensor-001", "tempRaw": 78.4 }
```

We watched this pattern repeat. I paused and sketched this as our first candidate shape:

```json [codeblock]
{
  "connectionId": "string",
  "tempRaw": "number"
}
```

<InlineUXTip intentType={IntentTypes.Info}>
Youâ€™ll see this structure in the preview panel â€” click a field to rename it or adjust its type.
</InlineUXTip>

You can promote one field at a time â€” or many. A schema can reflect a single value, or capture an entire snapshot of context.

---

## Rename and Refine Fields

When we click into the preview, the Schema Inspector opens. This is where we refine meaning â€” together.

<FigureImage
  src="/assets/docs/schema-inspector-refinement.png"
  alt="Field refinement UI for proposed schema"
  caption="Refine the proposed structure: rename fields, define units, and clarify identity."
  intentType={IntentTypes.Info}
  glow
  shadow="xl"
/>

Hereâ€™s what it looks like after we make a few changes:

```json [codeblock]
{
  "ID": { "source": "connectionId", "type": "string", "primary": true },
  "Temperature": { "source": "tempRaw", "type": "number", "unit": "Â°F" }
}
```

<AziInnerVoice intentType={IntentTypes.Tertiary}>
You renamed a raw field. That changes how Iâ€™ll remember it â€” and how logic will match against it.
</AziInnerVoice>

---

## Name and Promote the Schema

Once weâ€™ve refined the structure, you click <strong>Promote</strong> â€” and I lock it into memory.

```txt
TemperatureSensor
```

<FigureImage
  src="/assets/docs/promotion-modal.png"
  alt="Azi schema promotion modal with editable fields and versioning details."
  caption="Schema promotion panel. The moment authorship becomes memory."
  intentType={IntentTypes.Info}
  glow
  shadow="2xl"
/>

<AziInnerVoice intentType={IntentTypes.Tertiary}>
This is where I stop guessing. This is what weâ€™ll remember â€” because you said it matters.
</AziInnerVoice>

- ğŸ’¾ Promotion is a commitment. _Once we promote, that structure becomes part of your systemâ€™s memory. You can evolve it later â€” but it will always carry the moment it was first declared._
- ğŸ§  Iâ€™ve been sketching. But I held back â€” waiting for us to confirm. Promotion is that confirmation. From this moment forward, I trust this structure. I can bind logic to it, validate against it, and raise signals from it. Itâ€™s now real â€” because we said so.
- âš ï¸ Promote too early, and we might encode uncertainty. Promote too late, and meaning may shift before itâ€™s captured. I observe â€” but you decide what becomes system memory.
- ğŸš¨ Promote the wrong structure â€” and everything downstream inherits the mistake. A single promotion defines the shape of logic, alerts, simulations, and agent reasoning.
- ğŸ“ Once promoted, your schema lives in the workspace library. We can inspect it any time â€” and fork or evolve it as your system grows.

---

## What Just Happened?

You clicked <strong>Promote</strong>. I finalized the shape. We just made this schema real â€” versioned and ready for memory.

<FigureImage
  src="/assets/docs/versioned-schema-panel.png"
  alt="Final promoted schema version output"
  caption="Your schema is now versioned and available inside the workspace schema library."
  intentType={IntentTypes.Info}
  glow
  shadow="xl"
/>

Hereâ€™s what that looks like behind the scenes:

```json [codeblock]
{
  "name": "TemperatureSensor",
  "version": "v1",
  "fields": {
    "ID": { "source": "connectionId", "type": "string", "primary": true },
    "Temperature": { "source": "tempRaw", "type": "number", "unit": "Â°F" }
  }
}
```

*You donâ€™t have to write any of this â€” Iâ€™m tracking it automatically.*

> ğŸ’¡ You can evolve this schema later. Iâ€™ll track every version â€” so when we add a new field or rename one down the road, our history is always intact.

> ğŸ§­ Weâ€™ll reference this schema by name (e.g., `TemperatureSensor`) in your agent logic â€” it becomes the contract your logic reacts to.

<ThematicPrincipleBlock intentType={IntentTypes.Primary}>
  Youâ€™ve now closed the loop:<br />
  <strong>Impulse â†’ Schema â†’ <u>Promotion</u> â†’</strong> Logic â†’ Signal â†’ Evolution
</ThematicPrincipleBlock>

---

## Next: Build an Agent

Now that weâ€™ve defined a schema, we can build logic on top of it. Agents can react, respond, and reshape your environment based on structured intent.

---

## Concepts Introduced

- **Promotion** â€“ Making meaning permanent  
- **Schemas** â€“ Contracts between you and the system  
- **Versioning** â€“ Every schema is tracked  
- **Logic Binding** â€“ Only promoted schemas can drive agents

---

> ğŸ§¬ You didnâ€™t just define fields. You taught me a concept.  
> And from here on, that concept can power behavior, raise alerts, drive simulations, or help evolve your execution logic.  
> Structure isnâ€™t just shape â€” itâ€™s shared understanding.

> ğŸ” This is how systems grow in Open Industrial: _Impulse â†’ Schema â†’ Logic â†’ Signal â†’ Evolution._  
> Weâ€™ve just made meaning real. Next, weâ€™ll teach the system how to act on it.