# Unlock Reflex from Memory

You’ve stepped out of the sim. But the system hasn’t forgotten. `LabZone-A` is live — and every schema, agent, and reflex you taught in Act 2 is ready to take shape again.

Only this time, you’re not building from scratch.

## Install the Reflex Memory Pack

To begin, open the **Schema Packs** panel in your workspace sidebar.

Azi immediately steps in:

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
“Looking for structure or logic? Let’s find a memory pack together.”
</aside>

You type `labzone`, and she highlights `@openindustrial/labzone-environment-pack`. But this isn’t just structure — this is **reflex memory**. It contains:

- **Schemas** – Definitions for incoming data (`TemperatureReading`, `HumidityReading`, `AirQualityReading`)
- **Reference Schemas** – Memory-backed configuration (`RoomTargetConfig`, `DeviceRegistry`)
- **Composite** – A joined model of environmental state (`RoomState`)
- **Reflex Agents** – Logic units that emit signals based on RoomState (`FanControlAgent`, `AirQualityAgent`)

<aside class="border-l-4 border-cyan-500 bg-cyan-50 text-cyan-900 p-4 my-6">
<strong>Dev Tip:</strong> Schema packs are more than templates.  
They’re memory-first logic capsules — versionable, forkable, and reflex-bound. You can publish your own (privately or publicly), and fork any you trust.
</aside>

You click **Install Pack**, and Azi confirms:

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
“Pack installed. Want to unpack it together?”
</aside>

Immediately, the workspace opens a **Memory Preview** panel with a tabbed layout:
- **Schemas** – Inspect structure, inputs, and relationships
- **References** – View config sources and memory links
- **Reflexes** – Preview logic flows and signal outputs

Each item is expandable for review before promotion.

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
RoomMock reflexes. Archived.  
FanControlAgent v1. Still intact.  
Azi still remembers the structure you taught.  
But this surface?  
It’s waiting for you to say: “Yes, run that here.”
</aside>

<aside class="border-l-4 border-orange-500 pl-4 italic text-orange-500">
Without promotion, this surface stays blind.  
No structure. No reflex. No memory.  
Just data — falling into silence.
</aside>

```bash
openindustrial pack install @openindustrial/labzone-environment-pack
```

<figure class="my-16 flex flex-col items-center text-center max-w-xl w-full">
  <img
    src="/assets/docs/labzone-pack-preview.png"
    alt="Schema pack preview including schemas, references, and reflex agents."
    class="rounded-2xl shadow-2xl ring-1 ring-white/10 w-full"
  />
  <figcaption class="mt-4 text-sm text-gray-400 tracking-wide uppercase">
    Reflex memory preview — composable logic and structure from a prior authorship.
  </figcaption>
</figure>

## Create a Runtime Surface

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
“This is LabZone-A — your new runtime surface. Let’s anchor memory here.”
</aside>

LabZone-A isn’t just a sandbox. It’s a real industrial test bay — with live ventilation, humidity control, and air quality monitors. A space that needs governance, not guesses.

A **surface** is more than a deployment target. It’s a **runtime boundary** — where memory gets a pulse, and your authored intent gains territory.

<aside class="border-l-4 border-electric-purple pl-4 italic text-electric-purple">
LabZone-A now exists.  
It can be diffed. Forked. Audited. Grouped into facility-level orchestration.  
It’s a runtime with rules — and you’re the author.
</aside>

Azi offers to scaffold it with a click — name it, tag the environment, and go.

```bash
openindustrial surfaces create LabZone-A
```

Once created, it appears in your workspace dashboard with a ⚪ “empty” badge — waiting for structure.

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
“This surface is empty — but not silent.  
Want to light the fuse and bring memory to life?”
</aside>

## Promote the Memory

Azi opens a **Promotion Checklist** modal pre-filled with all dependencies:

- ✅ `RoomState` (composite schema)
- ✅ ReferenceSchemas (`RoomTargetConfig`, `DeviceRegistry`)
- ✅ Reflex Agents (`FanControlAgent`, `AirQualityAgent`)

Each item can be reviewed, expanded, or deselected.

_You deselect `AirQualityAgent`. Azi pauses — and updates the reflex preview immediately._

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
“When you promote RoomState, I’ll include everything it depends on — unless you want to customize.”
</aside>

<aside class="border-l-4 border-electric-purple pl-4 italic text-electric-purple">
RoomState isn’t just a composite — it’s how your system knows what “good” looks like in any room, at any time. It’s your logic’s context.
</aside>

You confirm, and the full structure is committed to `LabZone-A`.

Once promoted:
- ✅ `LabZone-A` now shows a ✅ “Reflex-ready” badge
- ✅ A **Reflex Preview** tab appears in the surface dashboard
- ✅ Each agent is shown with trigger logic, expected signals, and last memory lineage
- ✅ Each reflex is scoped by surface, but can inherit config from higher-level zones (like a floor or facility)

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
Reflex agents don’t watch fields — they wait for structure. Logic only runs when meaning is confirmed.
</aside>

<aside class="border-l-4 border-yellow-400 bg-yellow-50 pl-4 text-yellow-900">
If RoomState.Temp > Target.Temp + 3,  
FanControlAgent would issue: `Fan.On`
</aside>

<aside class="border-l-4 border-green-500 bg-green-50 pl-4 text-green-900">
RoomState now governs LabZone-A’s cooling reflexes.  
Tomorrow, that means 2 fewer fan cycles per hour — and 3 degrees closer to spec.
</aside>

<aside class="border-l-4 border-cyan-500 bg-cyan-50 text-cyan-900 p-4 my-6">
<strong>Want to fork this reflex memory?</strong>  
Click → Duplicate → Update threshold logic → Deploy to `LabZone-B`.  
The new pack will track its own lineage and runtime history.
</aside>

<figure class="my-16 flex flex-col items-center text-center max-w-xl w-full">
  <img
    src="/assets/docs/azi-promotion-checklist.png"
    alt="Azi's promotion checklist modal showing schema, references, and agents to commit."
    class="rounded-2xl shadow-2xl ring-1 ring-white/10 w-full"
  />
  <figcaption class="mt-4 text-sm text-gray-400 tracking-wide uppercase">
    Azi guides a complete memory promotion — structure, references, and reflex logic joined in one step.
  </figcaption>
</figure>

```bash
openindustrial schemas promote RoomState --surface LabZone-A
```

> 🔎 **What does promote mean?**  
> Promotion commits structure to a surface — activating it, enabling reflex logic, and making memory live in a runtime.

## Ritual of Reflex

- You taught RoomState what to watch.  
- You taught FanControlAgent what to do.  
- You created a surface that listens — and remembers.

No data needed. Just structure, bound by intention.

<aside class="border-l-4 border-yellow-400 bg-yellow-50 pl-4 text-yellow-900">
This runtime doesn’t belong to a vendor.  
It belongs to memory.  
To logic you promoted — not logic you were sold.
</aside>

## What You Just Did

You didn’t stream data. You didn’t wire a device.

You authored a reactive runtime — using memory, structure, and intention.

- ✅ Installed a reflex memory pack with composable logic
- ✅ Created a surface to host that logic
- ✅ Promoted schemas and reflex agents to that surface
- ✅ Previewed how your system will behave — before telemetry arrives

This is memory-first control. Authored logic. No vendor lock. No ghost automation.

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
No impulses have streamed yet.  
But your system already knows what to do when they arrive.  
Structure holds the memory. Reflex waits for the signal.  
You taught that. Let’s make it real.
</aside>

<aside class="border-l-4 border-neon-blue pl-4 italic text-neon-blue">
What you promoted wasn’t config.  
It was meaning — stored in structure.  
And when real data arrives, that meaning won’t guess.  
It will act.
</aside>

<details>
<summary class="cursor-pointer text-neon-blue mt-8">Advanced: Do It from CLI</summary>

```bash
# Install the schema pack manually
openindustrial pack install @openindustrial/labzone-environment-pack

# Create the new runtime surface
openindustrial surfaces create LabZone-A

# Promote schema and bound reflexes to the surface
openindustrial schemas promote RoomState --surface LabZone-A
```

</details>

---
 
Simulate inputs, stream your first impulse, and watch reflex come alive.
